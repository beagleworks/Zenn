---
title: "KiroでWSLに接続する方法"
emoji: "🐎"
type: "tech" # tech: 技術記事 / idea: アイデア
topics: ["kiro", "ai"]
published: true
---

びーぐるです🐶

AWSからVSCodeフォークのAIコーディングエージェント Kiro が発表され、プレビュー期間が始まっています。
プレビュー中はClaude Sonnet 4.0が無料で使えるので、試してみる価値はあると思います。
ドキュメントからしっかり整備してアプリケーションを組み立てていくため、従来型のAIコーディングエージェントが使い物にならないな、と感じていた方にもKiroなら肌に合うかもしれません。

Kiroの使い方はまた改めて紹介しようかと思っています。

https://kiro.dev/

## KiroからWSLに接続…できない？

Windowsで開発する場合、多くの方はWSLを活用しているのではないでしょうか。

VSCodeからWSLに接続するには、拡張機能"WSL"をインストールする必要がありました。
以後、例えば左下の"><"のようなボタンを押すことで接続先を選ぶことができ、その中にWSLが含まれていました。

しかし、Kiroではこの拡張機能がインストールされていないため、WSLに接続することができません。
Microsoft製の拡張機能はVSCodeフォークでは利用できないことが多く、本件もその例に漏れずと言ったところでしょう。


## WSLに接続する方法

実はKiroのissueにて、WSLに接続する方法が掲載されています。
https://github.com/kirodotdev/Kiro/issues/17

サードパーティ製の「Open Remote WSL」という拡張機能を利用することで、WSLに接続できるようになります。
具体的な手順は以下の通りです。

1. %USERPROFILE%\.kiro\argv.jsonに以下の項目を追加
```json
    "enable-proposed-api": [
        "jeanp413.open-remote-wsl",
    ]
```
※前の項目がある場合は、カンマを忘れずに追加してください

2. Kiroを再起動
3. 左のバーの拡張機能アイコンを押し、検索ウィンドウに"WSL"と入力
4. "Open Remote WSL"を選択しインストール
**jeanp413**氏がpublisherであることを確認してください。
![](/images/img0001.png)
5. Kiroを再起動
6. 左下の"><"のようなボタンを押すと、接続先にWSLが表示される

上記手順で無事に接続できるはずです。
※ 私の環境では再現しませんでしたが、WSL接続後もデフォルトでPowerShellを利用しようとしてしまうことがあるようです（？）
既定のプロファイルをBashに変更することで解決できるようです。

## 代替策…？

WSLに未接続の状態であっても、WSLが起動していればWSL側シェル(例えばbash)を開くことができ、Kiroもbashが開かれていることを認識できます。
これはWindows側からWSLのシェルを利用し、Windowsファイルシステムにアクセスしている状態です。

このままでも単純なアプリケーションは開発できますが、パスの記述に問題が発生します。
パスをバックスラッシュ(\)で表記するWindowsファイルシステムとパスをスラッシュ(/)で表記するWSLファイルシステムの差異のためです。

具体的にはディレクトリを作成し、そこで`npm init`をしてほしい場面では
```bash
mkdir frontend
cd "\\wsl.localhost\Ubuntu\home\username\dev_directory\frontend" # これはバックスラッシュで書かれたパスのためNo such file or directoryで失敗
npm init
```
としてしまい、ルートディレクトリ内で`npm init`を実行して満足げにタスク終了を宣言する、といった現象もみられます。

原因さえわかってしまえば対処すればよいだけですので
Hookに置換を記述する、明示的に置換するように指示を出す、等の対策で解決できるかもしれません（未確認）。
素直にWSLに接続するほうが得策かとは思います。

## まとめ
昨日の今日にデビューしたKiroなので、当然公式ドキュメントは未整備です。
なにか問題が発生したらGitHubのissueを確認しながら解決するしかないですね。
今後も何か発見しましたら記事にしたいと思っています。